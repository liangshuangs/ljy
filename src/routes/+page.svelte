<script>
  import { onMount } from 'svelte';
  
  let currentSubject = 'home';
  let isVisible = false;

  onMount(() => {
    isVisible = true;
  });

  function selectSubject(subject) {
    currentSubject = subject;
  }

  // å­¦ç§‘æ•°æ®
  const subjects = {
    math: {
      name: 'æ•°å­¦',
      icon: 'ğŸ”¢',
      color: '#ff6b6b',
      description: 'å’Œæ•°å­—åšæœ‹å‹ï¼Œå­¦ä¹ æœ‰è¶£çš„æ•°å­¦çŸ¥è¯†ï¼'
    },
    english: {
      name: 'è‹±è¯­',
      icon: 'ğŸ”¤',
      color: '#4ecdc4', 
      description: 'å­¦ä¹ è‹±è¯­å­—æ¯å’Œå•è¯ï¼Œå’Œä¸–ç•Œäº¤æœ‹å‹ï¼'
    },
    chinese: {
      name: 'è¯­æ–‡',
      icon: 'ğŸ“–',
      color: '#45b7d1',
      description: 'è¯»æ•…äº‹ã€å†™æ±‰å­—ï¼Œæ„Ÿå—ä¸­æ–‡çš„ç¾ä¸½ï¼'
    }
  };
</script>

<svelte:head>
  <title>å°å­¦ç”Ÿå­¦ä¹ ä¹å›­</title>
  <meta name="description" content="é€‚åˆå°å­¦ç”Ÿçš„åœ¨çº¿å­¦ä¹ å¹³å°ï¼ŒåŒ…å«æ•°å­¦ã€è‹±è¯­ã€è¯­æ–‡ä¸‰ä¸ªå­¦ç§‘" />
</svelte:head>

<div class="learning-container">
  {#if currentSubject === 'home'}
    <!-- ä¸»é¡µ - å­¦ç§‘é€‰æ‹© -->
    <section class="welcome-section" class:visible={isVisible}>
      <div class="welcome-header">
        <h1 class="welcome-title">ğŸŒŸ æ¬¢è¿æ¥åˆ°å­¦ä¹ ä¹å›­ ğŸŒŸ</h1>
        <p class="welcome-subtitle">é€‰æ‹©ä½ æƒ³å­¦ä¹ çš„å­¦ç§‘ï¼Œå¼€å§‹æœ‰è¶£çš„å­¦ä¹ ä¹‹æ—…å§ï¼</p>
      </div>

      <div class="subjects-grid">
        {#each Object.entries(subjects) as [key, subject]}
          <div 
            class="subject-card" 
            style="--subject-color: {subject.color}"
            on:click={() => selectSubject(key)}
            on:keydown={(e) => e.key === 'Enter' && selectSubject(key)}
            tabindex="0"
            role="button"
          >
            <div class="subject-icon">{subject.icon}</div>
            <h3 class="subject-name">{subject.name}</h3>
            <p class="subject-description">{subject.description}</p>
            <div class="subject-button">å¼€å§‹å­¦ä¹ </div>
          </div>
        {/each}
      </div>

      <div class="fun-facts">
        <h2 class="facts-title">ğŸ¯ å­¦ä¹ å°è´´å£«</h2>
        <div class="facts-grid">
          <div class="fact-item">
            <span class="fact-icon">ğŸˆ</span>
            <p>æ¯å¤©å­¦ä¹ 30åˆ†é’Ÿï¼ŒåšæŒå°±æœ‰å¤§è¿›æ­¥ï¼</p>
          </div>
          <div class="fact-item">
            <span class="fact-icon">â­</span>
            <p>åšé”™é¢˜ç›®ä¸è¦ç´§ï¼Œé‡è¦çš„æ˜¯è¦æ€è€ƒä¸ºä»€ä¹ˆï¼</p>
          </div>
          <div class="fact-item">
            <span class="fact-icon">ğŸ†</span>
            <p>å®Œæˆç»ƒä¹ é¢˜å¯ä»¥è·å¾—å°æ˜Ÿæ˜Ÿå¥–åŠ±å“¦ï¼</p>
          </div>
        </div>
      </div>
    </section>
  {:else}
    <!-- å­¦ç§‘å­¦ä¹ é¡µé¢ -->
    <section class="subject-learning">
      <div class="subject-header">
        <button class="back-button" on:click={() => selectSubject('home')}>
          â† è¿”å›ä¸»é¡µ
        </button>
        <div class="subject-title" style="--subject-color: {subjects[currentSubject].color}">
          <span class="subject-icon-large">{subjects[currentSubject].icon}</span>
          <h1>{subjects[currentSubject].name}å­¦ä¹ </h1>
        </div>
      </div>

      <div class="learning-content">
        {#if currentSubject === 'math'}
          <div class="math-content">
            <h2>ğŸ”¢ æ•°å­¦ä¹å›­</h2>
            <div class="learning-modules">
              <div class="module-card">
                <h3>â• åŠ æ³•ç»ƒä¹ </h3>
                <p>å­¦ä¹ æ•°å­—ç›¸åŠ ï¼Œä»ç®€å•çš„1+1å¼€å§‹ï¼</p>
                <div class="example">ä¾‹ï¼š2 + 3 = ?</div>
                <button class="practice-btn">å¼€å§‹ç»ƒä¹ </button>
              </div>
              <div class="module-card">
                <h3>â– å‡æ³•ç»ƒä¹ </h3>
                <p>å­¦ä¹ æ•°å­—ç›¸å‡ï¼Œç†è§£å‡å°‘çš„æ¦‚å¿µï¼</p>
                <div class="example">ä¾‹ï¼š5 - 2 = ?</div>
                <button class="practice-btn">å¼€å§‹ç»ƒä¹ </button>
              </div>
              <div class="module-card">
                <h3>ğŸ”¢ æ•°æ•°æ¸¸æˆ</h3>
                <p>ä»1æ•°åˆ°100ï¼Œå»ºç«‹æ•°å­—æ¦‚å¿µï¼</p>
                <div class="example">1, 2, 3, 4, 5...</div>
                <button class="practice-btn">å¼€å§‹ç»ƒä¹ </button>
              </div>
            </div>
          </div>
        {:else if currentSubject === 'english'}
          <div class="english-content">
            <h2>ğŸ”¤ è‹±è¯­å¤©åœ°</h2>
            <div class="learning-modules">
              <div class="module-card">
                <h3>ğŸ”¤ å­—æ¯å­¦ä¹ </h3>
                <p>å­¦ä¹ 26ä¸ªè‹±æ–‡å­—æ¯çš„è¯»éŸ³å’Œå†™æ³•ï¼</p>
                <div class="example">A, B, C, D, E...</div>
                <button class="practice-btn">å¼€å§‹ç»ƒä¹ </button>
              </div>
              <div class="module-card">
                <h3>ğŸ å•è¯ä¹å›­</h3>
                <p>å­¦ä¹ å¸¸ç”¨çš„è‹±è¯­å•è¯ï¼Œä»è‹¹æœå¼€å§‹ï¼</p>
                <div class="example">Apple ğŸ Cat ğŸ± Dog ğŸ¶</div>
                <button class="practice-btn">å¼€å§‹ç»ƒä¹ </button>
              </div>
              <div class="module-card">
                <h3>ğŸµ è‹±è¯­å„¿æ­Œ</h3>
                <p>é€šè¿‡å”±æ­Œå­¦è‹±è¯­ï¼Œæ›´æœ‰è¶£æ›´å¥½è®°ï¼</p>
                <div class="example">â™ª ABC Song â™ª</div>
                <button class="practice-btn">å¼€å§‹ç»ƒä¹ </button>
              </div>
            </div>
          </div>
        {:else if currentSubject === 'chinese'}
          <div class="chinese-content">
            <h2>ğŸ“– è¯­æ–‡èŠ±å›­</h2>
            <div class="learning-modules">
              <div class="module-card">
                <h3>âœï¸ æ±‰å­—ç»ƒä¹ </h3>
                <p>å­¦ä¹ å¸¸ç”¨æ±‰å­—çš„ç¬”ç”»å’Œéƒ¨é¦–ï¼</p>
                <div class="example">ä¸€ äºŒ ä¸‰ å›› äº”</div>
                <button class="practice-btn">å¼€å§‹ç»ƒä¹ </button>
              </div>
              <div class="module-card">
                <h3>ğŸ“š æ‹¼éŸ³ä¹å›­</h3>
                <p>å­¦ä¹ æ‹¼éŸ³å£°æ¯éŸµæ¯ï¼Œä¸ºé˜…è¯»æ‰“åŸºç¡€ï¼</p>
                <div class="example">a o e i u Ã¼</div>
                <button class="practice-btn">å¼€å§‹ç»ƒä¹ </button>
              </div>
              <div class="module-card">
                <h3>ğŸ° æ•…äº‹é˜…è¯»</h3>
                <p>è¯»æœ‰è¶£çš„å°æ•…äº‹ï¼Œæé«˜é˜…è¯»èƒ½åŠ›ï¼</p>
                <div class="example">ğŸ° å°å…”å­çš„æ•…äº‹</div>
                <button class="practice-btn">å¼€å§‹ç»ƒä¹ </button>
              </div>
            </div>
          </div>
        {/if}
      </div>
    </section>
  {/if}
</div>

<style lang="less">
  @import '../app.less';

  // ä¸“é—¨ä¸ºå°å­¦ç”Ÿè®¾è®¡çš„è‰²å½©å˜é‡
  @kids-red: #ff6b6b;
  @kids-blue: #45b7d1;
  @kids-green: #4ecdc4;
  @kids-yellow: #feca57;
  @kids-purple: #a55eea;
  @kids-orange: #ff9ff3;

  .learning-container {
    min-height: 100vh;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 2rem 0;
  }

  .welcome-section {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s ease;

    &.visible {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .welcome-header {
    text-align: center;
    margin-bottom: 3rem;

    .welcome-title {
      font-size: 3rem;
      color: white;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      animation: bounce 2s ease-in-out infinite;
    }

    .welcome-subtitle {
      font-size: 1.3rem;
      color: rgba(255,255,255,0.9);
      margin-bottom: 2rem;
    }
  }

  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-10px);
    }
    60% {
      transform: translateY(-5px);
    }
  }

  .subjects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 4rem;
  }

  .subject-card {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    cursor: pointer;
    border: 4px solid var(--subject-color);
    position: relative;
    overflow: hidden;

    &:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 8px;
      background: var(--subject-color);
    }

    .subject-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
      animation: wiggle 2s ease-in-out infinite;
    }

    .subject-name {
      font-size: 2rem;
      font-weight: bold;
      color: var(--subject-color);
      margin-bottom: 1rem;
    }

    .subject-description {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .subject-button {
      background: var(--subject-color);
      color: white;
      padding: 0.8rem 2rem;
      border-radius: 25px;
      font-weight: bold;
      font-size: 1.1rem;
      display: inline-block;
      transition: all 0.3s ease;

      &:hover {
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      }
    }
  }

  @keyframes wiggle {
    0%, 7% {
      transform: rotateZ(0);
    }
    15% {
      transform: rotateZ(-15deg);
    }
    20% {
      transform: rotateZ(10deg);
    }
    25% {
      transform: rotateZ(-10deg);
    }
    30% {
      transform: rotateZ(6deg);
    }
    35% {
      transform: rotateZ(-4deg);
    }
    40%, 100% {
      transform: rotateZ(0);
    }
  }

  .fun-facts {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);

    .facts-title {
      text-align: center;
      font-size: 2rem;
      color: #333;
      margin-bottom: 2rem;
    }

    .facts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .fact-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: #f8f9fa;
      border-radius: 15px;
      border-left: 4px solid @kids-yellow;

      .fact-icon {
        font-size: 2rem;
      }

      p {
        margin: 0;
        font-size: 1rem;
        color: #555;
        line-height: 1.5;
      }
    }
  }

  .subject-learning {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .subject-header {
    display: flex;
    align-items: center;
    gap: 2rem;
    margin-bottom: 3rem;

    .back-button {
      background: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 25px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: all 0.3s ease;

      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      }
    }

    .subject-title {
      display: flex;
      align-items: center;
      gap: 1rem;
      color: white;

      .subject-icon-large {
        font-size: 4rem;
        animation: pulse 2s ease-in-out infinite;
      }

      h1 {
        font-size: 3rem;
        margin: 0;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      }
    }
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
  }

  .learning-content {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);

    h2 {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 2rem;
      color: #333;
    }

    .learning-modules {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .module-card {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 1.5rem;
      text-align: center;
      border: 3px solid transparent;
      transition: all 0.3s ease;

      &:hover {
        border-color: @kids-blue;
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      }

      h3 {
        font-size: 1.5rem;
        color: #333;
        margin-bottom: 1rem;
      }

      p {
        color: #666;
        margin-bottom: 1rem;
        line-height: 1.6;
      }

      .example {
        background: #e9ecef;
        padding: 1rem;
        border-radius: 10px;
        font-size: 1.2rem;
        font-weight: bold;
        color: @kids-purple;
        margin-bottom: 1rem;
        border: 2px dashed @kids-blue;
      }

      .practice-btn {
        background: linear-gradient(45deg, @kids-green, @kids-blue);
        color: white;
        border: none;
        padding: 0.8rem 2rem;
        border-radius: 25px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;

        &:hover {
          transform: scale(1.05);
          box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
      }
    }
  }

  @media (max-width: 768px) {
    .learning-container {
      padding: 1rem 0;
    }

    .welcome-title {
      font-size: 2rem !important;
    }

    .welcome-subtitle {
      font-size: 1rem !important;
    }

    .subjects-grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .subject-card {
      padding: 1.5rem;
    }

    .subject-header {
      flex-direction: column;
      gap: 1rem;
      text-align: center;

      .subject-title h1 {
        font-size: 2rem;
      }

      .subject-icon-large {
        font-size: 3rem !important;
      }
    }

    .learning-modules {
      grid-template-columns: 1fr;
    }
  }
</style>